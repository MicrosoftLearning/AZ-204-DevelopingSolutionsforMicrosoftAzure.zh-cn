---
lab:
    az204Title: '实验室 04：构建多语言数据解决方案'
    az020Title: '实验室 04：构建多语言数据解决方案'
    az204Module: '模块 04：开发使用 Cosmos DB 存储的解决方案'
    az020Module: '模块 04：开发使用 Cosmos DB 存储的解决方案'
---

# 实验室 04：构建多语言数据解决方案

## Microsoft Azure 用户界面

鉴于 Microsoft 云工具的动态特性，Azure UI 在此培训内容开发后可能会发生更改。因此，实验室说明和实验室步骤可能无法完全一致。

当社区提醒我们进行必要的更改时，Microsoft 会更新本培训课程。然而，云更新的发生频率很高，因此你可能会遇到 UI 已更改但本培训内容尚未更新的情况。**如果发生这种情况，请适应这些更改，并根据需要在实验室中熟悉这些更改。**

## 说明

### 准备工作

#### 登录实验室环境

使用以下凭据登录 Windows 10 虚拟机 (VM)：
    
-   用户名：**Admin**

-   密码： **Pa55w.rd**

> **备注**：你的讲师将提供连接到虚拟实验室环境的说明。

#### 查看已安装的应用程序

在你的 Windows 10 桌面上找到任务栏。任务栏里有本实验室中你将使用的应用程序的图标，包括：
    
-   Microsoft Edge

-   文件资源管理器

-   Visual Studio Code

## 体系结构图

![该体系结构图描述了用户通过创建 Azure 存储帐户和 Azure Cosmos DB 帐户构建多语言数据解决方案。](./media/Lab04-Diagram.png)

### 练习 1： 在 Azure 中创建数据存储资源

#### 任务 1：打开 Azure 门户

1.  在任务栏上，选择 **Microsoft Edge** 图标。

1.  在打开的浏览器窗口中，浏览到 Azure 门户 ([portal.azure.com](https://portal.azure.com))，然后使用你将在本实验室中使用的帐户登录。

    > **备注**：第一次登录 Azure 门户时，你会看到一个门户教程。选择“**开始使用**”，跳过教程并开始使用门户。

#### 任务 2：创建 Azure Cosmos DB 帐户资源

1.  在 Azure 门户中，使用“**搜索资源、服务和文档**”文本框搜索“**Azure Cosmos DB**”，然后在结果列表中选择“**Azure Cosmos DB**”。

1.  在“**Azure Cosmos DB**”边栏选项卡中，选择“**+ 创建**”。

1.  在“**选择 API 选项**”边栏选项卡上的“**核心 (SQL) - 推荐**”框中，选择“**创建**”。

1.  在“**创建 Azure Cosmos DB 帐户 - 核心 (SQL)**”边栏选项卡的“**基本信息**”选项卡中，执行以下操作，然后选择“**查看 + 创建**”：

    | 设置                     | 操作                                                       |
    | --------------------------- | ------------------------------------------------------------ |
    | “**订阅**”列表       | 保留默认值。                                             |
    | “**资源组**”部分  | 选择“**新建**”。                                       |
    | “**名称**”文本框           | 输入“**Polyglotdata**”并选择“**确定**”。                                      |
    | “**帐户名**”文本框    | 输入“**polycosmos**_[yourname]_”。                            |
    | “**位置**”下拉列表 | 选择最靠近你的实验室计算机位置的 Azure 区域，你可在这里创建 Cosmos DB 帐户。 |
    | “**容量模式**”部分   | 选择“**无服务器**”。 |
    
    以下屏幕截图显示了“**创建 Azure Cosmos DB 帐户 - 核心 (SQL)**”边栏选项卡中的已配置设置。
    
    ![该屏幕截图显示了配置用于创建 Azure Cosmos DB 帐户的选项](media/l04_cosmosdb_create_summary.png)
    
1.  在“**创建 Azure Cosmos DB 帐户 - 核心 (SQL)**”边栏选项卡的“**查看 + 创建**”选项卡上，查看你在前面的步骤中选择的选项。 

1.  选择“**创建**”，使用指定的配置创建 Azure Cosmos DB 帐户。

    > **备注**：等待创建任务完成，再继续本实验室。

1.  选择“**转到资源**”。

1.  在“**Azure Cosmos DB 帐户**”边栏选项卡中，找到“**设置**”部分，然后选择“**密钥**”链接。

1.  在“**密钥**”窗格中的“**读写密钥**”选项卡上，记录“**URI**”、“**主密钥**”和“**主连接字符串**”文本框的值。你将在本实验室的后面部分使用这些值。

#### 任务 3：创建 Azure 存储帐户资源

1.  在 Azure 门户中，使用“**搜索资源、服务和文档**”文本框搜索“**存储帐户**”，并在结果列表中选择“**存储帐户**”。

1.  在“**存储帐户**”边栏选项卡中，选择“**+ 创建**”。

1.  在“**创建存储帐户**”边栏选项卡的“**基本信息**”选项卡中，执行以下操作，然后选择“**查看 + 创建**”：


    | 设置                     | 操作                                                       |
    | --------------------------- | ------------------------------------------------------------ |
    | “**订阅**”列表       | 保留默认值。                                             |
    | “**资源组**”部分  | 选择“**PolyglotData**”。                                       |
    | “**存储帐户名称**”文本框 | 输入“**polystor**_[yourname]_”。                                      |
    | “**区域**”下拉列表   | 选择你在本练习前面创建 Cosmos DB 帐户的同一区域。  |
    | “**性能**”部分 | 选择“**标准**”。 |
    | “**冗余**”下拉列表 | 选择“**本地冗余存储(LRS)**”。 |
    
    
    以下屏幕截图显示了“**创建存储帐户**”边栏选项卡中的已配置设置。
          
     ![该屏幕截图显示了配置用于创建 Azure 存储帐户的选项](media/l04_storage_create_summary.png)
     
1.  在“**创建存储帐户**”边栏选项卡的“**查看 + 创建**”选项卡上，查看你在前面的步骤中选择的选项。

1.  选择“**创建**”，使用指定的配置创建存储帐户。

    > **备注**：等待创建任务完成，再继续本实验室。

#### 回顾

在本练习中，你创建了将在本实验室中实现的多语言数据解决方案所需的 Azure 资源。你创建的 Azure 资源包括 Azure Cosmos DB 帐户和 Azure 存储帐户。

### 练习 2：查看和上传数据

#### 任务 1：将映像上传到 Azure Blob 存储

1.  在 Azure 门户的导航窗格中，导航回“**存储帐户**”边栏选项卡，然后选择你在本实验室的上一个练习中创建的 **polystor**_[yourname]_ 存储帐户。

1.  在“**polystor**_[yourname]_ 存储帐户”边栏选项卡中，选择“**数据存储**”部分的“**容器**”链接。

1.  在“**容器**”部分，选择“**+ 容器**”。

1.  在“**新建容器**”弹出窗口中，执行以下操作，然后选择“**创建**”：

    | 设置                     | 操作                                                       |
    | --------------------------- | ------------------------------------------------------------ |
    | “**名称**”文本框       | 输入“**images**”。                                             |
    | “**公共访问级别**”下拉列表 | 选择“**Blob (仅对 Blob 进行匿名读取访问)**”。 |
    
   
1.  回到“**容器**”部分，选择新创建的“**images**”容器。

1.  在“**容器**”边栏选项卡上找到“**设置**”部分，然后选择“**属性**”链接。

1.  在“**属性**”窗格中，记下并记录“**URL**”文本框中的值。你稍后将在本实验室中使用此值。

1.  在边栏选项卡中找到并选择“**概述**”链接。

1.  在边栏选项卡中，选择“**上传**”。

1.  在“**上传 Blob**”弹出窗口中，执行以下操作：
    
    a.  在“**文件**”部分，选择“**文件夹**”图标。
    
    b.  在“**文件资源管理器**”窗口中，浏览到“**Allfiles (F):\\Allfiles\\Labs\\04\\Starter\\Images**”，选择 42 个单独的 **.jpg** 图像文件，然后选择“**打开**”。
    
    c.  确保已选中“**如果文件已存在，请覆盖**”，然后选择“**上传**”。

    > **备注**： 等待所有 Blob 上传完成，然后再继续本实验室。

#### 任务 2：查看 JSON 数据

1.  在实验室计算机上，启动 Visual Studio Code。

1.  从“**文件**”菜单，选择“**打开文件**”，浏览到 **Allfiles (F):\\Allfiles\\Labs\\04\\Starter\\AdventureWorks\\AdventureWorks.Upload**，选择“**models.json**”，然后选择“**打开**”。

1.  查看 **models.json** 文件的格式，请注意，它包含一个 JSON 对象数组和一个嵌套的对象数组，这些对象是 **Products** 属性的一部分。

    > **备注**：这将确定你要定义的类，以便在将 JSON 文件的内容上传到 Cosmos DB 集合之前对其进行反序列化。

1.  在 **models.json** 文件中，请注意，其中一个属性被命名为“**Category**”。

    > **备注**：你将使用 **Category** 属性来定义目标 Cosmos DB 集合的分区。

1.  关闭 Visual Studio Code。

#### 任务 3：创建 Cosmos DB 数据库和集合，并上传 JSON 数据

1.  在“**启动**”屏幕上，选择“**Visual Studio Code**”磁贴。

1.  在“**文件**”菜单上，选择“**打开文件夹**”。

1.  在打开的“**文件资源管理器**”窗口中，浏览到“**Allfiles (F):\\Allfiles\\Labs\\04\\Starter\\AdventureWorks**”，然后选择“**选择文件夹**”。

1.  在“**Visual Studio Code**”窗口中，选择“**资源管理器**”窗格的空白区域，激活快捷菜单，然后选择“**在集成终端中打开**”。

1.  在终端提示符中，验证当前目录是否设置为“**AdventureWorks**”（如果不是，则将其更改为该目录），然后运行以下命令，将终端上下文切换为 **AdventureWorks.Upload** 文件夹：

    ```
    cd .\AdventureWorks.Upload\
    ```

1.  在终端提示符下运行以下命令，将 Azure Cosmos DB .NET 客户端库添加到当前打开的项目中：

    ```
    dotnet add package Microsoft.Azure.Cosmos --version 3.20.1
    ```

    > **备注**： **dotnet add package** 命令将从 **NuGet** 添加 **Microsoft.Azure.Cosmos** 包。有关详细信息，请参阅 [Microsoft.Azure.Cosmos](https://www.nuget.org/packages/Microsoft.Azure.Cosmos/3.20.1)。

1.  查看在终端上打印的生成结果。生成应成功完成，不会出现错误或警告消息。

1.  在“**Visual Studio Code**”窗口的“**资源管理器**”窗格中，展开“**AdventureWorks.Upload**”项目。

1.  打开 **Program.cs** 文件。

1.  在 **Program.cs** 文件中，查看 **using** 指令，请注意，它们包括 **Microsoft.Azure.Cosmos**、**System.IO;**、**System.Text.Json**、**System.Threading.Tasks** 和 **System.Collections.Generic**。这允许将 JSON 项从实验室计算机上的本地文件异步上传到 Cosmos DB 数据库中的集合。

1.  在 **Program.cs** 文件的第 14 行，通过将空字符串替换为本实验室前面记录的 Cosmos DB 帐户的 **URI** 属性来设置 **EndpointUrl** 的值。确保该值用双引号引起来。

1.  在第 15 行，通过将空字符串替换为本实验室前面记录的 Cosmos DB 帐户的 **PRIMARY KEY** 属性来设置 **AuthorizationKey** 的值。确保该值用双引号引起来。

1.  在第 18 行，通过将空字符串替换为 **"/Category"** 来设置 **PrimaryKey** 的值。

1.  在第 19 行，通过将空字符串替换为 **"F:\\\\Allfiles\\\\Labs\\\\04\\\\Starter\\\\AdventureWorks\\\\AdventureWorks.Upload\\\\models.json"** 来设置 **JsonFilePath** 的值。

1.  在 try 块中，请注意对 **CosmosClient** 类的 **CreateDatabaseIfNotExistsAsync** 方法的调用。这将创建一个数据库（如果尚不存在）。

1.  请注意对 **Database** 类的 **DefineContainer** 方法的调用。这将创建一个用于托管 JSON 项的容器（如果尚不存在）。

    > **备注**： **DefineContainer** 方法包括一个成本最小化选项，可通过它修改默认索引策略（它会自动索引所有属性）。

1.  请注意 **using** 语句，该语句依赖 **StreamReader** 对象从文本文件中读取 JSON 项，并将其反序列化为 **Program.cs** 文件中进一步定义的 **Model** 类的对象。

1.  请注意 foreach 循环，它遍历反序列化对象的集合，并将其中每个对象异步插入到目标集合中。

1.  查看 **Model** 和 **Product** 类，它们反映了在本实验室前面查看的 JSON 格式的文件中存储的对象的格式。

1.  保存并关闭 **Program.cs** 文件。

1.  从终端提示符，运行以下命令来还原任何缺失的 NuGet 包，并在文件夹中生成项目：

    ```
    dotnet build
    ```

    > **备注**： **dotnet build** 命令将在生成文件夹中的所有项目之前自动还原所有缺失的 NuGet 包。

1.  从终端提示符运行以下命令，运行 .NET Core 控制台应用程序：

    ```
    dotnet run
    ```

    > **备注**： **dotnet run** 命令将自动生成对项目的更改，然后在不连接调试程序的情况下启动 Web 应用程序。该命令将输出指示数据加载进度的消息，其中包括插入到目标集合的项数和插入操作的持续时间。

1.  查看运行在终端上打印的命令的结果。运行应会成功完成，显示消息指出正在将 119 个项插入到目标 Cosmos DB 集合。

1.  选择“**终止终端**”（“**回收站**”图标）以关闭终端窗格和所有关联进程。

#### 任务 4：验证 JSON 数据上传

1.  在实验室计算机上，切换到显示 Azure 门户的“**Microsoft Edge**”浏览器窗口。

1.  在 Azure 门户中，导航回到“**Azure Cosmos DB**”边栏选项卡，然后在 Cosmos DB 帐户列表中，选择你在本实验室前面创建的 Azure Cosmos DB 帐户 **polycosmos**_[yourname]_。

1.  在“**Azure Cosmos DB 帐户**”边栏选项卡中，找到并选择边栏选项卡中的“**数据资源管理器**”链接。

1.  在“**数据资源管理器**”窗格中，展开“**零售**”数据库节点。

1.  展开“**在线**”容器节点，然后选择“**新的 SQL 查询**”。

    > **备注**：此选项的标签可能会隐藏。可以通过将鼠标悬停在“**数据资源管理器**”窗格的图标上来显示标签。

1.  在“**查询**”选项卡中，输入以下文本：

    ```
    SELECT * FROM models
    ```

1.  选择“**执行查询**”，然后查看查询返回的 JSON 项列表。

1.  返回查询编辑器，将现有文本替换为以下文本：

    ```
    SELECT VALUE COUNT(1) FROM models
    ```

1.  选择“**执行查询**”，然后查看“**COUNT**”聚合操作的结果。

1.  切换回“**Visual Studio Code**”窗口。

#### 回顾

在本练习中，你使用用于 Azure Cosmos DB 的 .NET SDK 将数据插入到了 Azure Cosmos DB。接下来实现的 Web 应用程序将使用此数据。

### 练习 3：创建 .NET Web 应用程序

#### 任务 1：更新对数据存储的引用并构建 Web 应用程序

1.  在“**Visual Studio Code**”窗口的“**资源管理器**”窗格中，展开“**AdventureWorks.Web**”项目。

1.  打开“**appsettings.json**”文件。

1.  在 JSON 对象的第 3 行中，找到 **ConnectionStrings.AdventureWorksCosmosContext** 路径。注意当前值为空：

    ```
    "ConnectionStrings": {
        "AdventureWorksCosmosContext": "",
    },
    ```

1.  通过将“**AdventureWorksCosmosContext**”属性的值设置为你之前在本实验中记录的 Azure Cosmos DB 帐户的“**主连接字符串**”来更新该值。

1.  在 JSON 对象的第 6 行，找到“**Settings.BlobContainerUrl**”路径。注意当前值为空：

    ```
    "Settings": {
        "BlobContainerUrl": "",
        ...
    }
    ```

1.  通过将 **BlobContainerUrl** 属性的值设置为你之前在本实验室中记录的名为 **images** 的 Azure 存储 Blob 容器的 **URL** 属性来更新该值。

1.  保存并关闭 **appsettings.json** 文件。

1.  在“**Visual Studio Code**”窗口中，选择“**AdventureWorks.Context**”，激活快捷菜单，然后选择“**在集成终端中打开**”。

1.  在终端提示符中，验证当前目录是否设置为 **AdventureWorks.Context**（如果不是，则将其更改为该目录），然后运行以下命令，从 NuGet 导入 **Microsoft.Azure.Cosmos**：

    ```
    dotnet add package Microsoft.Azure.Cosmos --version 3.20.1
    ```

1.  从命令提示符运行以下命令，构建 .NET Web 应用程序：

    ```
    dotnet build
    ```

1.  查看在终端上打印的生成结果。生成应成功完成，不会出现错误或警告消息。

#### 任务 2： 配置与 Azure Cosmos DB 的连接

1.  在“**Visual Studio Code**”窗口的“**资源管理器**”窗格中，展开“**AdventureWorks.Context**”项目。

1.  从 **AdventureWorks.Context** 文件夹节点的快捷菜单中，选择“**新建文件**”。

1.  在新文件提示符下，输入“**AdventureWorksCosmosContext.cs**”。

1.  在 **AdventureWorksCosmosContext.cs** 文件的代码编辑器选项卡中，添加以下代码行，以从引用的 **AdventureWorks.Models** 项目中导入 **AdventureWorks.Models** 命名空间：

    ```
    using AdventureWorks.Models;
    ```

1.  添加以下代码行，通过从 NuGet 导入的“**Microsoft.Azure.Cosmos**”包导入“**Microsoft.Azure.Cosmos**”和“**Microsoft.Azure.Cosmos.Linq**”命名空间：

    ```
    using Microsoft.Azure.Cosmos;
    using Microsoft.Azure.Cosmos.Linq;
    ```

1.  添加以下代码行，为此文件将使用的内置命名空间添加 **using** 指令：

    ```
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    ```

1.  输入以下代码，以添加“**AdventureWorks.Context**”命名空间块：

    ```
    namespace AdventureWorks.Context
    {
    }
    ```

1.  在“**AdventureWorks.Context**”命名空间中，输入以下代码，以创建新的“**AdventureWorksCosmosContext**”类：

    ```
    public class AdventureWorksCosmosContext
    {
    }
    ```

1.  通过添加表示此类将实现“**IAdventureWorksProductContext**”接口的规范来更新“**AdventureWorksCosmosContext**”类的声明：

    ```
    public class AdventureWorksCosmosContext : IAdventureWorksProductContext
    {
    }
    ```

1.  在“**AdventureWorksCosmosContext**”类中输入以下代码，新建一个名为“**_container**”的只读 *Container* 变量：

    ```
    private readonly Container _container;
    ```

1.  在“**AdventureWorksCosmosContext**”类中，添加一个使用以下签名的新构造函数：

    ```
    public AdventureWorksCosmosContext(string connectionString, string database = "Retail", string container = "Online")
    {
    }
    ```

1.  在构造函数中，添加以下代码块来创建“**CosmosClient**”类的新实例，然后从客户端获取“**数据库**”和“**容器**”实例：

    ```
    _container = new CosmosClient(connectionString)
        .GetDatabase(database)
        .GetContainer(container);
    ```

1.  在“**AdventureWorksCosmosContext**”类中，添加一个使用以下签名的新 **FindModelAsync** 方法：

    ```
    public async Task<Model> FindModelAsync(Guid id)
    {
    }
    ```

1.  在 **FindModelAsync** 方法中，添加以下代码块以创建一个 LINQ 查询，并将其转换为迭代器，循环访问结果集，然后返回结果集中的单个项：

    ```
    var iterator = _container.GetItemLinqQueryable<Model>()
        .Where(m => m.id == id)
        .ToFeedIterator<Model>();

    List<Model> matches = new List<Model>();
    while (iterator.HasMoreResults)
    {
        var next = await iterator.ReadNextAsync();
        matches.AddRange(next);
    }

    return matches.SingleOrDefault();
    ```

1.  在 **AdventureWorksCosmosContext** 类中，添加一个使用以下签名的新 **GetModelsAsync** 方法：

    ```
    public async Task<List<Model>> GetModelsAsync()
    {
    }
    ```

1.  在“**GetModelsAsync**”方法中，添加以下代码块，以运行 SQL 查询，获取查询结果迭代器，循环访问结果集，然后返回所有结果的并集：

    ```
    string query = $@"SELECT * FROM items";

    var iterator = _container.GetItemQueryIterator<Model>(query);

    List<Model> matches = new List<Model>();
    while (iterator.HasMoreResults)
    {
        var next = await iterator.ReadNextAsync();
        matches.AddRange(next);
    }

    return matches;
    ```

1.  在 **AdventureWorksCosmosContext** 类中，添加一个使用以下签名的新 **FindProductAsync** 方法：

    ```
    public async Task<Product> FindProductAsync(Guid id)
    {
    }
    ```

1.  在“**FindProductAsync**”方法中，添加以下代码块，以运行 SQL 查询，获取查询结果迭代器，循环访问结果集，然后返回结果集中的单个项：

    ```
    string query = $@"SELECT VALUE products
                        FROM models
                        JOIN products in models.Products
                        WHERE products.id = '{id}'";

    var iterator = _container.GetItemQueryIterator<Product>(query);

    List<Product> matches = new List<Product>();
    while (iterator.HasMoreResults)
    {
        var next = await iterator.ReadNextAsync();
        matches.AddRange(next);
    }

    return matches.SingleOrDefault();
    ```

1.  保存并关闭 **AdventureWorksCosmosContext.cs** 文件。
   
1.  从终端提示符，将当前目录设置为 **AdventureWorks.Context**，运行以下命令来构建 .NET Web 应用程序：

    ```
    dotnet build
    ```

    > **备注**：如果出现任何生成错误，请查看 **Allfiles (F):\\Allfiles\\Labs\\04\\Solution\\AdventureWorks\\AdventureWorks.Context** 文件夹中的 **AdventureWorksCosmosContext.cs** 文件。

#### 任务 3：查看 .NET 应用程序启动逻辑

1.  在“**Visual Studio Code**”窗口的“**资源管理器**”窗格中，展开“**AdventureWorks.Web**”项目。

1.  打开“**Startup.cs**”文件。

1.  在 **Startup** 类中，注意现有的 **ConfigureProductService** 方法：

    ```
    public void ConfigureProductService(IServiceCollection services)
    {
        services.AddScoped<IAdventureWorksProductContext, AdventureWorksSqlContext>(provider =>
            new AdventureWorksCosmosContext(
                _configuration.GetConnectionString(nameof(AdventureWorksCosmosContext))
            )
        );
    }
    ```

    > **备注**：产品服务使用 Cosmos DB 作为其数据库。

1.  关闭 **Startup.cs** 文件而不进行任何修改。

#### 任务 4：验证 .NET 应用程序是否成功连接到数据存储

1.  在 Visual Studio Code 中，从终端提示符运行以下命令，将终端上下文切换到 **AdventureWorks.Web** 文件夹：

    ```
    cd ..\AdventureWorks.Web\
    ```

1.  从命令提示符运行以下命令，运行 ASP.NET Web 应用程序：

    ```
    dotnet run
    ```

    > **备注**： **dotnet run** 命令将自动生成对项目的更改，然后在不连接调试程序的情况下启动 Web 应用程序。此命令将输出正在运行的应用程序和所有已分配端口的 URL。

1.  在任务栏上，选择“**Microsoft Edge**”图标。

1.  在打开的浏览器窗口中，浏览到当前正在运行的 Web 应用程序 (<http://localhost:5000>)。

1.  在 Web 应用程序中，查看首页上显示的模型列表。

1.  找到“**Touring-1000**”模型，并选择“**查看详细信息**”。

1.  在“**Touring-1000**”产品详细信息页面上，查看选项列表。

1.  关闭显示 Web 应用程序的浏览器窗口。

1.  切换到“**Visual Studio Code**”窗口，然后选择“**终止终端**”（“**回收站**”图标），关闭当前打开的终端和所有关联的进程。

#### 回顾

在本练习中，你编写了 C# 代码以使用 .NET SDK 查询 Azure Cosmos DB 集合。

### 练习 4：清理订阅 

#### 任务 1：打开 Azure Cloud Shell

1.  在 Azure 门户中，选择 **Cloud Shell** 图标 ![Cloud Shell 图标](./media/az204_lab_CloudShell.png)，打开新的 Bash 会话。如果 Cloud Shell 默认为 PowerShell 会话，请选择“**PowerShell**”，然后在下拉菜单中选择“**Bash**”。

     > **备注**：首次启动 **Cloud Shell** 时，系统会提示选择 **Bash** 或 **PowerShell**，请选择“**PowerShell**”。如果显示“**未挂载存储**”消息，请选择你在本实验室中使用的订阅，然后选择“**创建存储**”。

#### 任务 2：删除资源组

1.  在 **Cloud Shell** 窗格中运行以下命令，删除 **PolyglotData** 资源组：

    ```
    az group delete --name PolyglotData --no-wait --yes
    ```
    
     > **备注**：该命令以异步方式执行（由 *--no-wait* 参数确定）。因此，尽管可立即在同一 Bash 会话中运行另一个 Azure CLI 命令，但实际上要花几分钟才能删除资源组。
  
1.  关闭门户中的 **Cloud Shell** 窗格。

#### 任务 3：关闭活动应用程序

1.  关闭当前正在运行的 Microsoft Edge 应用程序。

1.  关闭当前正在运行的“Visual Studio Code”应用程序。

#### 回顾

在本练习中，你通过删除本实验室中使用的资源组清理订阅。
